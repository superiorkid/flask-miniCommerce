{% extends "base.html" %}

{% block styles %}
  {{ckeditor.load()}}
{% endblock styles %}

{% block content %}

  <div class="container mt-5 w-50">
    <h1 class="font-weight-bold">Edit Product</h1>
    <hr>
    <form method="post"  enctype="multipart/form-data">
      {{form.hidden_tag()}}
      <div class="form-group">
        {{form.sku.label}}
        {{form.sku(class="form-control")}}
        
        {% for error in form.sku.errors %}
        <div class="col-sm-3">
          <small id="passwordHelp" class="text-danger">
            {{error}}
          </small>      
        </div>
        {% endfor %}
      </div>
      <div class="form-group">
        {{form.product_name.label}}
        {{form.product_name(class="form-control")}}

        {% for error in form.product_name.errors %}
        <div class="col-sm-3">
          <small id="passwordHelp" class="text-danger">
            {{error}}
          </small>      
        </div>
        {% endfor %}
      </div>
      <div class="form-group">
        {{form.description.label}}
        {{form.description(class="form-control", rows="10")}}
      </div>
      <div class="form-group">
        <div class="custom-file">
          {{form.image(class="custom-file-input", id="input-file")}}
          {{form.image.label(class="custom-file-label", for="input-file")}}
        </div>  
      </div>
      <div class="row">
        <div class="form-group col-md-6">
          {{form.quantity.label}}
          {{form.quantity(class="form-control")}}
        </div>
        <div class="form-group col-md-6">
          {{form.regular_price.label}}
          {{form.regular_price(class="form-control")}}
        </div>
      </div>
      <div class="mt-3">
        <button onclick="history.back()" class="btn btn-danger">Back</button>
        {{form.submit(class="btn btn-success")}}
      </div>
    </form>
  </div>

{% endblock content %}

{% block scripts %}

  <script>
    // Get a reference to our file input
    const fileInput = document.querySelector('input[type="file"]');

    // Create a new File object
    const myFile = new File(['Image File'], '{{ images }}', {
        type: 'img',
        lastModified: new Date(),
    });

    // Now let's create a DataTransfer to get a FileList
    const dataTransfer = new DataTransfer();
    dataTransfer.items.add(myFile);
    fileInput.files = dataTransfer.files;

    let path = fileInput.value
    let filename = path.replace(/^.*[\\\/]/, '')

    // replace the choose file label
    $(".custom-file-label").html(filename);
  </script>

  <script src="{{ url_for('static', filename="js/inputFile.js") }}"></script>

{% endblock scripts %}

